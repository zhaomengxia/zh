<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zh.mapper.investigation.LowEarlyWarningMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.zh.entity.investigation.LowEarlyWarning">
        <id column="id" property="id"/>
        <result column="division_code" property="divisionCode"/>
        <result column="division_name" property="divisionName"/>
        <result column="early_warning_time" property="earlyWarningTime"/>
        <result column="early_warning_rain" property="earlyWarningRain"/>
        <result column="is_deleted" property="deleted"/>
        <result column="create_time" property="createTime"/>
        <result column="update_time" property="updateTime"/>
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        id, division_code, division_name, early_warning_time, early_warning_rain, is_deleted, create_time, update_time
    </sql>

    <!-- 模糊查询字段列 -->
    <sql id="Query_List">
        division_code, division_name, early_warning_time, early_warning_rain
    </sql>

    <sql id="Result_List">
        id, division_code, division_name, early_warning_time, early_warning_rain
    </sql>

    <select id="getListPage" resultType="com.zh.entity.investigation.LowEarlyWarning">
        select
        <include refid="Base_Column_List"/>
        from low_early_warning
        where is_deleted = 0
        <if test="keyword != null and keyword != ''">
            <bind name="keyword" value="'%'+keyword+'%'"/>
            and concat(<include refid="Query_List"/>) like #{keyword}
        </if>
    </select>


    <select id="getList" resultType="com.zh.dto.basic.LowEarlyWarningDTO">
        select
        <include refid="Result_List"/>
        from low_early_warning
        where is_deleted = 0
        <if test="keyword != null and keyword != ''">
            <bind name="keyword" value="'%'+keyword+'%'"/>
            and concat(<include refid="Query_List"/>) like #{keyword}
        </if>
    </select>

</mapper>
